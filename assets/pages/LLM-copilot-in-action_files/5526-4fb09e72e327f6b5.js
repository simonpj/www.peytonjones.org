"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5526],{61276:function(e,n,t){t.d(n,{I:function(){return p},Z:function(){return c}});var i=t(4337),l=t(35250),a=t(21389);function s(){var e=(0,i._)(["flex p-4 bg-gray-50 dark:bg-white/5 rounded-md items-center gap-4 min-h-[71px]"]);return s=function(){return e},e}function o(){var e=(0,i._)(["w-10 text-2xl text-center"]);return o=function(){return e},e}function r(){var e=(0,i._)(["flex-1 leading-5"]);return r=function(){return e},e}function u(){var e=(0,i._)(["flex gap-4 flex-col text-sm"]);return u=function(){return e},e}function c(e){var n=e.icon,t=e.children;return(0,l.jsxs)(d,{children:[(0,l.jsx)(f,{children:n}),(0,l.jsx)(g,{children:t})]})}var d=a.Z.div(s()),f=a.Z.div(o()),g=a.Z.div(r()),p=a.Z.div(u())},35526:function(e,n,t){t.d(n,{Z:function(){return eE}});var i,l,a,s,o,r=t(39324),u=t(71209),c=t(70216),d=t(10064),f=t(4337),g=t(20485),p=t(35250),h=t(54636),m=t(42780),x=t(8874),v=t(19841),b=t(10721),j=t(70079),M=t(1454),y=t(32004),k=t(94968),P=t(21389),_=t(13246),C=t(23234),T=t(50362),w=t(72290),Z=t(96251),I=t(19253),B=t(17314),S=t(21722),N=t(38104),L=t(94705),A=t(7184),D=t(89319),R=t(61276),E=t(86646),W=t(82473),U=t(4536),q=t(70671),F=t(64898),O=t(43178),z=t(95999),H=t(35808),V=(0,k.vU)({enterWebsiteDomainTitle:{id:"DevelopPluginModal.enterWebsiteDomainTitle",description:"Title for the section where users enter their website domain",defaultMessage:"Enter your website domain"},learnToBuildPlugin:{id:"DevelopPluginModal.learnToBuildPlugin",description:"Text for the link directing users to the plugin documentation",defaultMessage:"Visit our documentation to learn how to build a plugin."},pluginApprovalWarning:{id:"DevelopPluginModal.pluginApprovalWarning",description:"Warning about plugin review process if the manifest is modified",defaultMessage:"If your plugin has been approved to be in the ChatGPT plugin store, and you have made changes to your plugin's manifest, your plugin will be removed from the store, and you will need to <resubmitLink>resubmit it for review</resubmitLink>."},domainInputPlaceholder:{id:"DevelopPluginModal.domainInputPlaceholder",description:"Placeholder text for the domain input field",defaultMessage:"ex: openai.com or localhost:3000"},authenticationFileText:{id:"DevelopPluginModal.authenticationFileText",description:"Text for the link to expand authentication settings",defaultMessage:"My file requires authentication"},authenticationTypeText:{id:"DevelopPluginModal.authenticationTypeText",description:"Label for the section to choose authentication type",defaultMessage:"Authentication type"},accessTokenText:{id:"DevelopPluginModal.accessTokenText",description:"Label for the section to input the access token",defaultMessage:"Access token"},findManifestFileText:{id:"DevelopPluginModal.findManifestFileText",description:"Button text to find the manifest file",defaultMessage:"Find manifest file"},cancelButtonText:{id:"DevelopPluginModal.cancelButtonText",description:"Button text for the cancel button",defaultMessage:"Cancel"},domainDisplayName:{id:"DevelopPluginModal.domainDisplayName",description:"Display name for the domain input",defaultMessage:"Domain"},bearerLabel:{id:"DevelopPluginModal.bearerLabel",description:"Label for the Bearer authentication type radio button",defaultMessage:"Bearer"},basicLabel:{id:"DevelopPluginModal.basicLabel",description:"Label for the Basic authentication type radio button",defaultMessage:"Basic"},refetchManifestButtonText:{id:"DevelopPluginModal.refetchManifestButtonText",description:"Button text for refetching the manifest",defaultMessage:"Refetch manifest"},installLocalhostPluginButtonText:{id:"DevelopPluginModal.installLocalhostPluginButtonText",description:"Button text for installing localhost plugin",defaultMessage:"Install localhost plugin"},nextButtonText:{id:"DevelopPluginModal.nextButtonText",description:"Button text for the next step",defaultMessage:"Next"},foundPluginTitle:{id:"DevelopPluginModal.foundPluginTitle",description:"Title for the modal when a plugin is found",defaultMessage:"Found plugin"},enterServiceAccessTokenLabel:{id:"DevelopPluginModal.enterServiceAccessTokenLabel",description:"Label for entering the service access token",defaultMessage:"Enter your service access token:"},enterOAuthCredentialsLabel:{id:"DevelopPluginModal.enterOAuthCredentialsLabel",description:"Label for entering OAuth credentials",defaultMessage:"Enter your OAuth credentials:"},addVerificationTokenTitle:{id:"DevelopPluginModal.addVerificationTokenTitle",description:"Title for the modal when adding verification tokens",defaultMessage:"Add verification token"},verifyTokensButtonText:{id:"DevelopPluginModal.verifyTokensButtonText",description:"Button text for verifying tokens",defaultMessage:"Verify tokens"},addTokensLaterButtonText:{id:"DevelopPluginModal.addTokensLaterButtonText",description:"Button text for adding tokens later",defaultMessage:"I'll add the tokens later"},addVerificationTokensText:{id:"DevelopPluginModal.addVerificationTokensText",description:"Text for adding verification tokens to the manifest file",defaultMessage:"Add the following verification tokens to your manifest file:"},readyToInstallTitle:{id:"DevelopPluginModal.readyToInstallTitle",description:"Title for the modal when the plugin is ready to install",defaultMessage:"Ready to install"},installForMeButtonText:{id:"DevelopPluginModal.installForMeButtonText",description:"Button text for installing the plugin for the user",defaultMessage:"Install for me"},installLaterButtonText:{id:"DevelopPluginModal.installLaterButtonText",description:"Button text for installing the plugin later",defaultMessage:"Install later"},unverifiedPluginText:{id:"DevelopPluginModal.unverifiedPluginText",description:"Text about the unverified plugin being installed by a limited number of developers",defaultMessage:"Your unverified plugin can now be installed by <developersLink>up to 15 developers</developersLink>. Once you're ready to make your plugin available to everyone, you can <submitPluginLink>submit your plugin for review</submitPluginLink>."}});function G(e){var n=e.onClickInstall,t=e.onInstallLocalhost,i=e.onClose,l=(0,d._)((0,j.useState)(),2),a=l[0],s=l[1],o=(0,d._)((0,j.useState)(),2),r=o[0],u=o[1],c=(0,d._)((0,j.useState)(!1),2),f=c[0],g=c[1],h=(0,j.useCallback)(function(e){s(e)},[]),m=(0,j.useCallback)(function(){g(!0)},[]);return f&&(null==a?void 0:a.scrapeManifestResponse.plugin)?(0,p.jsx)(Q,{plugin:null==a?void 0:a.scrapeManifestResponse.plugin,onClickInstall:n,onClose:i}):r&&(null==a?void 0:a.scrapeManifestResponse.plugin)?(0,p.jsx)(K,{plugin:a.scrapeManifestResponse.plugin,manifestAccessToken:a.manifestAccessToken,verificationTokens:r,onReadyToInstall:m,onClose:i}):a?(0,p.jsx)(Y,{loadManifestResult:a,onRefetch:h,onSubmitAuthInfo:u,onReadyToInstall:m,onInstallLocalhost:t,onClose:i}):(0,p.jsx)($,{onFetch:h,onClose:i})}function $(e){var n=e.onFetch,t=e.onClose,i=(0,q.Z)(),l=(0,U.kP)().session,a=(0,d._)((0,j.useState)(!1),2),s=a[0],o=a[1],c=(0,d._)((0,j.useState)("bearer"),2),f=c[0],g=c[1],h=(0,d._)((0,j.useState)(),2),m=h[0],x=h[1],v=(0,j.useRef)(null),b=(0,j.useRef)(null),k=(0,F.useFetchManifestAndSpec)(),P=k.fetchManifestAndSpec,_=k.isLoading;(0,j.useEffect)(function(){var e;null===(e=v.current)||void 0===e||e.focus()},[]);var C=(0,j.useCallback)(function(){o(function(e){return!e})},[]),T=(0,j.useCallback)(function(e){g(e.target.value)},[]),w=(0,j.useCallback)((0,S._)(function(){var e,t,l;return(0,N.Jh)(this,function(a){return(l=null===(e=v.current)||void 0===e?void 0:e.value)?(P({domain:l,manifestAccessToken:s?{authorization_type:f,token:(null===(t=b.current)||void 0===t?void 0:t.value)||""}:void 0,onSuccess:n,onError:function(e){return x((null==e?void 0:e.message)||"Couldn't find manifest.")}}),[2]):(x(i.formatMessage(V.domainInputPlaceholder)),[2])})}),[P,n,f,s,i]);return(0,p.jsx)(A.Z,{isOpen:!0,onClose:t,type:"success",title:(0,p.jsx)(y.Z,(0,r._)({},V.enterWebsiteDomainTitle)),primaryButton:(0,p.jsx)(L.ZP.Button,{title:i.formatMessage(V.findManifestFileText),color:"primary",onClick:w,loading:_}),secondaryButton:(0,p.jsx)(L.ZP.Button,{title:i.formatMessage(V.cancelButtonText),color:"neutral",onClick:t}),children:(0,p.jsxs)(z.p,{children:[(0,p.jsx)("a",{href:"https://platform.openai.com/docs/plugins/getting-started",target:"_blank",rel:"noreferrer",className:"text-green-600",children:(0,p.jsx)(y.Z,(0,r._)({},V.learnToBuildPlugin))}),(0,p.jsx)(R.Z,{icon:"\uD83D\uDEA8",children:(0,p.jsx)(y.Z,(0,u._)((0,r._)({},V.pluginApprovalWarning),{values:{resubmitLink:function(e){return(0,p.jsx)("a",{target:"_blank",rel:"noreferrer",className:"text-green-600",href:"https://platform.openai.com/docs/plugins/review/submit-a-plugin-for-review",children:e})}}}))}),(0,p.jsx)(D.Z,{ref:v,name:"url",displayName:i.formatMessage(V.domainDisplayName),placeholder:i.formatMessage(V.domainInputPlaceholder),onPressEnter:w,autoFocus:!0}),(null==l?void 0:l.user)!=null&&(0,U.yl)(l.user)&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{role:"button",className:"flex cursor-pointer items-center gap-1 text-sm text-black/60 hover:text-black/70",onClick:C,children:[(0,p.jsx)("div",{children:(0,p.jsx)(y.Z,(0,r._)({},V.authenticationFileText))}),s?(0,p.jsx)(M.rH8,{className:"icon-sm"}):(0,p.jsx)(M.bTu,{className:"icon-sm"})]}),s&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"flex flex-col gap-2 text-sm",children:[(0,p.jsx)("div",{children:(0,p.jsx)(y.Z,(0,r._)({},V.authenticationTypeText))}),(0,p.jsxs)("div",{className:"flex gap-6",children:[(0,p.jsx)(J,{label:i.formatMessage(V.bearerLabel),value:"bearer",checked:"bearer"===f,onChange:T}),(0,p.jsx)(J,{label:i.formatMessage(V.basicLabel),value:"basic",checked:"basic"===f,onChange:T})]})]}),(0,p.jsxs)("div",{className:"flex flex-col gap-2 text-sm",children:[(0,p.jsx)("div",{children:(0,p.jsx)(y.Z,(0,r._)({},V.accessTokenText))}),(0,p.jsx)(D.Z,{ref:b,name:"manifestToken",onPressEnter:w})]})]})]}),m&&(0,p.jsx)(z.L,{children:m})]})})}function J(e){var n=e.label,t=e.value,i=e.checked,l=e.onChange;return(0,p.jsxs)("label",{className:"flex items-center gap-2",children:[(0,p.jsx)("input",{name:"manifestAuthType",type:"radio",value:t,checked:i,onChange:l,className:"text-green-600 focus:ring-green-600"}),n]})}function Y(e){var n=e.loadManifestResult,t=e.onRefetch,i=e.onSubmitAuthInfo,l=e.onReadyToInstall,a=e.onInstallLocalhost,s=e.onClose,o=(0,q.Z)(),u=n.domain,c=n.manifestAccessToken,f=n.scrapeManifestResponse,g=n.apiValidationInfo,h=f.plugin,m=f.manifest_validation_info,x=(0,d._)((0,j.useState)(),2),v=x[0],b=x[1],M=(0,d._)((0,j.useState)(!1),2),k=M[0],P=M[1],_=(0,j.useRef)(null),C=(0,j.useRef)(null),T=(0,j.useRef)(null),w=(0,F.useFetchManifestAndSpec)(),I=w.fetchManifestAndSpec,B=w.isLoading,R=(0,W.NL)(),U=h&&(0,Z.cf)(h),G=(null==h?void 0:h.manifest.auth.type)==="service_http",$=(null==h?void 0:h.manifest.auth.type)==="oauth",J=m.errors&&m.errors.length>0||(null==g?void 0:g.errors)&&(null==g?void 0:g.errors.length)>0,Y=(0,j.useCallback)((0,S._)(function(){var e,n,o,r,d;return(0,N.Jh)(this,function(f){switch(f.label){case 0:if(!J)return[3,1];return I({domain:u,manifestAccessToken:c,onSuccess:t,onError:function(e){return b((null==e?void 0:e.message)||"Couldn't find manifest.")}}),[3,15];case 1:if(!U)return[3,2];return(0,F.addToCachedInstalledPlugins)(h,R),a(h),[3,15];case 2:if(!G)return[3,8];if(!(null===(e=_.current)||void 0===e?void 0:e.value))return b("Please provide your service access token."),[2];f.label=3;case 3:return f.trys.push([3,5,6,7]),P(!0),[4,E.ZP.setPluginServiceHttpToken({id:h.id,serviceAccessToken:_.current.value})];case 4:return i(f.sent().verification_tokens),[3,7];case 5:return f.sent(),b("Error setting access token."),[3,7];case 6:return P(!1),[7];case 7:return[3,15];case 8:if(!$)return[3,14];if(r=null===(n=C.current)||void 0===n?void 0:n.value,d=null===(o=T.current)||void 0===o?void 0:o.value,!r||!d)return b("Please provide your OAuth credentials."),[2];f.label=9;case 9:return f.trys.push([9,11,12,13]),[4,E.ZP.setPluginOAuthClientCredentials({id:h.id,clientId:C.current.value,clientSecret:T.current.value})];case 10:return i(f.sent().verification_tokens),[3,13];case 11:return f.sent(),b("Error setting OAuth credentials."),[3,13];case 12:return P(!1),[7];case 13:return[3,15];case 14:h?l(h):s(),f.label=15;case 15:return[2]}})}),[G,$,h,u,c,J,U,R,I,t,i,l,a,s]);return(0,p.jsx)(A.Z,{isOpen:!0,onClose:s,type:"success",title:(0,p.jsx)(y.Z,(0,r._)({},V.foundPluginTitle)),primaryButton:(0,p.jsx)(L.ZP.Button,{title:J?o.formatMessage(V.refetchManifestButtonText):U?o.formatMessage(V.installLocalhostPluginButtonText):o.formatMessage(V.nextButtonText),color:"primary",onClick:Y,loading:k||B}),secondaryButton:(J||G||$)&&(0,p.jsx)(L.ZP.Button,{title:o.formatMessage(V.cancelButtonText),color:"neutral",onClick:s}),children:(0,p.jsxs)(z.p,{children:[(0,p.jsx)(H.rC,{manifestValidationInfo:m}),g&&(0,p.jsx)(H.q6,{apiValidationInfo:g}),h&&(0,p.jsx)(O.Z,{plugin:h}),G&&!J&&(0,p.jsxs)("div",{children:[(0,p.jsx)("div",{className:"text-sm",children:(0,p.jsx)(y.Z,(0,r._)({},V.enterServiceAccessTokenLabel))}),(0,p.jsx)("div",{className:"mt-2",children:(0,p.jsx)(D.Z,{ref:_,name:"serviceToken",placeholder:"Service access token",autoComplete:"off",onPressEnter:Y,autoFocus:!0})})]}),$&&!J&&(0,p.jsxs)("div",{children:[(0,p.jsx)("div",{className:"text-sm",children:(0,p.jsx)(y.Z,(0,r._)({},V.enterOAuthCredentialsLabel))}),(0,p.jsx)("div",{className:"mt-2",children:(0,p.jsx)(D.Z,{ref:C,name:"clientId",placeholder:"Client ID",autoComplete:"off",onPressEnter:Y,autoFocus:!0})}),(0,p.jsx)("div",{className:"mt-2",children:(0,p.jsx)(D.Z,{ref:T,type:"password",name:"clientSecret",placeholder:"Client secret",autoComplete:"off",onPressEnter:Y})})]}),v&&(0,p.jsx)(z.L,{children:v})]})})}function K(e){var n=e.plugin,t=e.manifestAccessToken,i=e.verificationTokens,l=e.onReadyToInstall,a=e.onClose,s=(0,q.Z)(),o=(0,d._)((0,j.useState)(),2),u=o[0],c=o[1],f=(0,d._)((0,j.useState)(!1),2),g=f[0],h=f[1],m=(0,j.useCallback)((0,S._)(function(){var e,a;return(0,N.Jh)(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,3,4]),h(!0),[4,E.ZP.scrapePluginManifest({domain:n.domain,manifestAccessToken:t})];case 1:if(e=s.sent().plugin){for(var o in a="service_http"===e.manifest.auth.type||"oauth"===e.manifest.auth.type?e.manifest.auth.verification_tokens:{},i)if(i[o]!==a[o])return c('Please add the "'.concat(o,'" token to your manifest file.')),[2];l(e)}else c("Error creating plugin.");return[3,4];case 2:return s.sent(),c("Error creating plugin."),[3,4];case 3:return h(!1),[7];case 4:return[2]}})}),[n,t,i,l]);return(0,p.jsx)(A.Z,{isOpen:!0,onClose:a,type:"success",title:(0,p.jsx)(y.Z,(0,r._)({},V.addVerificationTokenTitle)),primaryButton:(0,p.jsx)(L.ZP.Button,{title:s.formatMessage(V.verifyTokensButtonText),color:"primary",onClick:m,loading:g}),secondaryButton:(0,p.jsx)(L.ZP.Button,{title:s.formatMessage(V.addTokensLaterButtonText),color:"neutral",onClick:a}),children:(0,p.jsxs)(z.p,{children:[(0,p.jsx)(O.Z,{plugin:n}),(0,p.jsx)("div",{className:"text-sm",children:(0,p.jsx)(y.Z,(0,r._)({},V.addVerificationTokensText))}),(0,p.jsx)("pre",{className:"text-sm",children:JSON.stringify(i,null)}),u&&(0,p.jsx)(z.L,{children:u})]})})}function Q(e){var n=e.plugin,t=e.onClickInstall,i=e.onClose,l=(0,q.Z)(),a=(0,j.useCallback)(function(){t(n)},[n,t]);return(0,p.jsx)(A.Z,{isOpen:!0,onClose:i,type:"success",title:(0,p.jsx)(y.Z,(0,r._)({},V.readyToInstallTitle)),primaryButton:(0,p.jsx)(L.ZP.Button,{title:l.formatMessage(V.installForMeButtonText),color:"primary",onClick:a}),secondaryButton:(0,p.jsx)(L.ZP.Button,{title:l.formatMessage(V.installLaterButtonText),color:"neutral",onClick:i}),children:(0,p.jsx)(z.p,{children:(0,p.jsx)("div",{className:"text-sm",children:(0,p.jsx)(y.Z,(0,u._)((0,r._)({},V.unverifiedPluginText),{values:{developersLink:function(e){return(0,p.jsx)("a",{href:"https://platform.openai.com/docs/plugins/production/can-i-invite-people-to-try-my-plugin",target:"_blank",rel:"noreferrer",className:"text-green-600",children:e})},submitPluginLink:function(e){return(0,p.jsx)("a",{href:"https://platform.openai.com/docs/plugins/review/submit-a-plugin-for-review",target:"_blank",rel:"noreferrer",className:"text-green-600",children:e})}}}))})})})}var X=t(17582),ee=t(96237),en=t(48133),et=t(42798),ei=t(62682),el=t(17944),ea=t(1491),es=t(94486),eo=t(89678),er=t.n(eo),eu=t(96096),ec=t(56457),ed=t(21613);(i=a||(a={}))[i.All=0]="All",i[i.Installed=1]="Installed",(l=s||(s={})).New="newly_added",l.Popular="most_popular";var ef=[{id:s.Popular,title:"Popular"},{id:s.New,title:"New"},{id:a.All,title:"All"},{id:a.Installed,title:"Installed"}],eg=t(64502),ep=(0,k.vU)({prev:{id:"PaginationControls.prev",defaultMessage:"Prev",description:"Label for the previous page button in the pagination controls"},next:{id:"PaginationControls.next",defaultMessage:"Next",description:"Label for the next page button in the pagination controls"}});function eh(e){var n=e.page,t=e.numPages,i=e.goToPage,l=n>0,a=n<t-1,s=(0,j.useCallback)(function(){i(Math.max(n-1,0))},[n,i]),o=(0,j.useCallback)(function(){i(Math.min(n+1,t-1))},[n,t,i]),u=[],c=!0,d=!1,f=void 0;try{for(var g,h=(function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,i=Math.max(0,n-t+1);if(0===i)return em(0,n);var l=em(0,e),a=em(e+1,n);if(i<a.length-1)a.splice(Math.floor((a.length-i)/2),i,-1);else if(i<l.length-1)l.splice(Math.floor((l.length-i)/2),i,-1);else{var s=Math.min(a.length-3,i),o=i-s+1;a.splice(Math.floor((a.length-s)/2),s,-1),l.splice(Math.floor((l.length-o)/2),o,-2)}return(0,eg._)(l).concat([e],(0,eg._)(a))})(n,t)[Symbol.iterator]();!(c=(g=h.next()).done);c=!0)!function(){var e=g.value;e<0?u.push((0,p.jsx)("div",{role:"button",className:"flex h-5 w-5 items-center justify-center",children:"â€¦"},"ellipsis-".concat(e))):u.push((0,p.jsx)(eB,{role:"button",className:(0,v.default)("flex h-5 w-5 items-center justify-center",e===n&&"text-blue-600 hover:text-blue-600 dark:text-blue-600 dark:hover:text-blue-600"),onClick:function(){return i(e)},children:e+1},e))}()}catch(e){d=!0,f=e}finally{try{c||null==h.return||h.return()}finally{if(d)throw f}}return(0,p.jsxs)("div",{className:"flex flex-wrap gap-2 text-sm text-black/60 dark:text-white/70",children:[(0,p.jsxs)(eB,{role:"button",className:(0,v.default)("flex items-center",!l&&"opacity-50"),onClick:s,$disabled:!l,children:[(0,p.jsx)(M.YFh,{className:"icon-sm"}),(0,p.jsx)(y.Z,(0,r._)({},ep.prev))]}),u,(0,p.jsxs)(eB,{role:"button",className:(0,v.default)("flex items-center",!a&&"opacity-50"),onClick:o,$disabled:!a,children:[(0,p.jsx)(y.Z,(0,r._)({},ep.next)),(0,p.jsx)(M.Tfp,{className:"icon-sm"})]})]})}function em(e,n){return Array.from({length:n-e},function(n,t){return t+e})}var ex=(0,k.vU)({title:{id:"RequiresMfaModal.title",defaultMessage:"Enable two-factor authentication",description:"Title for the modal to enable two-factor authentication"},enableMfaButton:{id:"RequiresMfaModal.enableMfaButton",defaultMessage:"Enable two-factor authentication",description:"Label for the button to enable two-factor authentication"},cancelButton:{id:"RequiresMfaModal.cancelButton",defaultMessage:"Cancel",description:"Label for the cancel button"},disclaimer:{id:"RequiresMfaModal.disclaimer",defaultMessage:"This plugin requires you to have two-factor authentication enabled for additional security. Please set up two-factor authentication and try again.",description:"Disclaimer text informing the user that the plugin requires two-factor authentication"}});function ev(e){var n=e.onClose,t=(0,es.S)().setupMfa,i=(0,q.Z)();return(0,p.jsx)(A.Z,{isOpen:!0,onClose:n,type:"success",title:i.formatMessage(ex.title),primaryButton:(0,p.jsx)(L.ZP.Button,{title:i.formatMessage(ex.enableMfaButton),color:"primary",onClick:t}),secondaryButton:(0,p.jsx)(L.ZP.Button,{title:i.formatMessage(ex.cancelButton),color:"neutral",onClick:n}),children:(0,p.jsx)(z.p,{children:(0,p.jsx)(R.I,{children:(0,p.jsx)(R.Z,{icon:"\uD83D\uDEA8",children:(0,p.jsx)(y.Z,(0,r._)({},ex.disclaimer))})})})})}function eb(){var e=(0,f._)(["text-sm text-black/70 dark:text-white/70 whitespace-nowrap ",""]);return eb=function(){return e},e}function ej(){var e=(0,f._)(["hidden h-4 border-l border-black/30 dark:border-white/30 sm:block"]);return ej=function(){return e},e}var eM=(o={},(0,ee._)(o,ea._G.Mobile,8),(0,ee._)(o,ea._G.Small,4),(0,ee._)(o,ea._G.Medium,4),(0,ee._)(o,ea._G.Large,6),(0,ee._)(o,ea._G.XLarge,8),o),ey=(0,k.vU)({title:{id:"PluginStoreModal.title",defaultMessage:"Plugin store",description:"Title of the plugin store"},searchPlaceholder:{id:"PluginStoreModal.searchPlaceholder",defaultMessage:"Search plugins",description:"Placeholder text for the plugin store search bar"},noSearchResultsTitle:{id:"PluginStoreModal.noSearchResults",defaultMessage:'No plugins found for "{query}"',description:"Message shown when no plugins are found for a search query"},noSearchResultsHint:{id:"PluginStoreModal.noSearchResultsHint",defaultMessage:"Try a different query or category",description:"Hint shown when no plugins are found for a search query"},installUnverifiedPlugin:{id:"PluginStoreModal.installUnverifiedPlugin",defaultMessage:"Install an unverified plugin",description:"Link to dialog to install an unverified plugin"},developPlugin:{id:"PluginStoreModal.developPlugin",defaultMessage:"Develop your own plugin",description:"Link to dialog to develop your own plugin"},aboutPlugins:{id:"PluginStoreModal.aboutPlugins",defaultMessage:"About plugins",description:"Link to learn more about plugins"},install:{id:"PluginStoreModal.card.install",defaultMessage:"Install",description:"Button to install a plugin"},uninstall:{id:"PluginStoreModal.card.uninstall",defaultMessage:"Uninstall",description:"Button to uninstall a plugin"},installing:{id:"PluginStoreModal.card.installing",defaultMessage:"Installing",description:"Status label when installing a plugin"},uninstalling:{id:"PluginStoreModal.card.uninstalling",defaultMessage:"Uninstalling",description:"Status label when uninstalling a plugin"},developerInfo:{id:"PluginStoreModal.card.developerInfo",defaultMessage:"Developer info",description:"Label for plugin developer information"}}),ek=s.Popular;function eP(e){var n,t,i,l=e.onInstallWithAuthRequired,s=e.onClickInstallDeveloper,o=e.onClickDevelop,u=e.onClickAbout,c=e.onClose,f=(0,q.Z)(),g=(0,el.hz)(),h=(0,d._)((0,j.useState)(ek),2),m=h[0],x=h[1],v=(0,d._)((0,j.useState)(""),2),b=v[0],k=v[1],P=(0,d._)((0,j.useState)(""),2),_=P[0],C=P[1],T=(t=(n=(0,ed.C)()).isLoading,i=n.installedPlugins,{availableFilters:(0,j.useMemo)(function(){return ef.filter(function(e){return e.id!==a.Installed||i.length>0})},[i]),isLoading:t}).availableFilters;(0,j.useEffect)(function(){T.some(function(e){return e.id===m})||x(ek)},[m,T]);var w=(0,j.useCallback)(er()(function(e){C(e)},300),[]);return(0,p.jsx)(A.Z,{isOpen:!0,onClose:c,size:"custom",className:"w-full max-w-7xl bg-gray-50 md:min-w-[672px] lg:min-w-[896px] xl:min-w-[1024px]",type:"success",title:f.formatMessage(ey.title),closeButton:(0,p.jsx)(L.ZP.CloseButton,{onClose:c}),children:(0,p.jsxs)(z.p,{children:[T.length>1&&(0,p.jsxs)("div",{className:"flex flex-wrap gap-3",children:[T.map(function(e){return(0,p.jsx)(eC,{selected:m===e.id,onClick:function(){x(e.id)},children:e.title},e.id)}),(0,p.jsxs)("div",{className:"relative",children:[(0,p.jsx)("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:(0,p.jsx)(M.jRj,{className:"icon-md text-gray-500 dark:text-gray-400"})}),(0,p.jsx)(D.Z,{className:"pl-10",autoFocus:!0,type:"search",placeholder:f.formatMessage(ey.searchPlaceholder),value:b,onChange:function(e){k(e.target.value),x(a.All),w(e.target.value)},name:"search"})]})]}),(0,p.jsx)(e_,{filter:m,query:_,onInstallWithAuthRequired:l,children:(0,p.jsxs)("div",{className:"flex flex-col items-center gap-2 sm:flex-row",children:[g.has("tools3_dev")&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(eB,{onClick:s,children:(0,p.jsx)(y.Z,(0,r._)({},ey.installUnverifiedPlugin))}),(0,p.jsx)(eS,{}),(0,p.jsx)(eB,{onClick:o,children:(0,p.jsx)(y.Z,(0,r._)({},ey.developPlugin))}),(0,p.jsx)(eS,{})]}),(0,p.jsx)(eB,{onClick:u,children:(0,p.jsx)(y.Z,(0,r._)({},ey.aboutPlugins))})]})})]})})}function e_(e){var n=e.filter,t=e.query,i=e.onInstallWithAuthRequired,l=e.children,s=eM[(0,ea.dQ)()],o=(0,d._)((0,j.useState)(0),2),r=o[0],u=o[1],c=function(e){var n=e.filter,t=e.query,i=e.page,l=e.pageSize,s=(0,ec.Z)({category:function(e){if(e!==a.All&&e!==a.Installed)return e}(n),search:t,offset:l*i,limit:l}),o=s.data,r=s.isLoading,u=(0,ed.C)(),c=u.installedPlugins,d=u.isLoading,f=(0,j.useMemo)(function(){return""!==t?c.map(function(e){return{plugin:e,score:function(e,n){var t=n.toLowerCase(),i=t.trim().split(/\s+/),l=e.manifest.description_for_human.toLowerCase(),a=e.manifest.name_for_human.toLowerCase(),s=0;if(a===t||e.domain.toLowerCase()===t)return 1e3;if(a.startsWith(t))return 500;if(a.includes(t))return 100;var o=!0,r=!1,u=void 0;try{for(var c,d=i[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){var f=c.value;if(a.startsWith(f))s+=50;else if(a.includes(f))s+=10;else{if(!l.includes(f))return 0;s+=1}}}catch(e){r=!0,u=e}finally{try{o||null==d.return||d.return()}finally{if(r)throw u}}return s}(e,t)}}).filter(function(e){return e.score>0}).sort(function(e,n){return n.score-e.score}).map(function(e){return e.plugin}):c.sort(function(e,n){return e.manifest.name_for_human.localeCompare(n.manifest.name_for_human)})},[c,t]);if(n===a.Installed){var g,p,h,m,x,v,b=(p=(g={page:i,items:f,pageSize:l}).page,h=g.items,m=g.pageSize,x=Math.ceil(h.length/m),v=p*m,{pagesTotal:x,pageItems:h.slice(v,v+m)});return{isLoading:d,items:b.pageItems,pagesTotal:b.pagesTotal}}var M=null!=o?o:{count:void 0,items:void 0},y=M.count;return{isLoading:r,items:M.items,pagesTotal:void 0!==y?Math.ceil(y/l):void 0}}({pageSize:s,filter:n,query:t,page:r}),f=c.isLoading,g=c.items,h=c.pagesTotal;(0,j.useEffect)(function(){u(0)},[n,t]);var m=(0,d._)((0,j.useState)(!1),2),x=m[0],v=m[1];return x?(0,p.jsx)(ev,{onClose:function(){v(!1)}}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(eT,{plugins:null!=g?g:[],numSkeletons:s,query:t,isLoading:f,onInstallWithAuthRequired:i,onRequestMfa:function(){return v(!0)}}),(0,p.jsxs)("div",{className:"flex flex-col flex-wrap items-center justify-center gap-6 sm:flex-row md:justify-between",children:[(0,p.jsx)("div",{className:"max-lg:justify-center flex flex-1 justify-start",children:void 0!==h&&h>1&&(0,p.jsx)(eh,{page:r,numPages:h,goToPage:u})}),l]})]})}function eC(e){var n=e.selected,t=e.onClick,i=e.children;return(0,p.jsx)(en.z,{color:n?"light":"neutral",className:(0,v.default)("focus:ring-0",n&&"hover:bg-gray-200",!n&&"text-black/50"),onClick:t,children:i})}function eT(e){var n=e.plugins,t=e.numSkeletons,i=e.isLoading,l=e.onInstallWithAuthRequired,a=e.onRequestMfa,s=e.query;if(0===n.length&&!i&&s)return(0,p.jsxs)("div",{className:"flex h-[404px] flex-col items-center justify-center gap-4",children:[(0,p.jsx)("div",{className:"text-lg font-medium",children:(0,p.jsx)(y.Z,(0,u._)((0,r._)({},ey.noSearchResultsTitle),{values:{query:s}}))}),(0,p.jsx)("div",{className:"text-sm text-black/50",children:(0,p.jsx)(y.Z,(0,r._)({},ey.noSearchResultsHint))})]});var o=i?Array(t).fill(0).map(function(e,n){return(0,p.jsx)(eZ,{},n)}):n.map(function(e){return(0,p.jsx)(ew,{plugin:e,onInstallWithAuthRequired:l,onRequestMfa:a},e.id)});return(0,p.jsx)("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2 sm:grid-rows-2 lg:grid-cols-3 xl:grid-cols-4",children:o})}function ew(e){var n,t,i=e.plugin,l=e.onInstallWithAuthRequired,a=e.onRequestMfa,s=(0,d._)((0,j.useState)(!1),2),o=s[0],u=s[1],c=(0,d._)((0,j.useState)(!1),2),f=c[0],g=c[1],h=(0,F.useInstallPlugin)({onSuccess:function(e){(0,B.wu)(e.id)},onError:function(e){console.error(e),w.m.danger("Error installing ".concat(i.manifest.name_for_human,"."))},onSettled:function(){u(!1)}}),m=(0,F.useUninstallPlugin)({onSuccess:function(){},onError:function(e){console.error(e),w.m.danger("Error uninstalling ".concat(i.manifest.name_for_human,"."))},onSettled:function(){g(!1)}}),x=(0,U.kP)().session,v=(0,el.hz)(),b=(0,q.Z)(),k=(0,es.S)().isUsernamePassword,P=(0,j.useCallback)(function(){var e,n=i.manifest.auth.type;if(!("none"===n||"service_http"===n)&&!(null==x?void 0:null===(e=x.user)||void 0===e?void 0:e.mfa)&&v.has(ei.i)&&k){a();return}"oauth"===n?(0,F.doOauthRedirect)(i):"user_http"===n?l(i):(u(!0),h(i.id))},[i,h,l,a,k,x,v]),C=(0,j.useCallback)(function(){g(!0),m(i.id)},[i,m]);return t=o||f?(0,p.jsxs)(en.z,{color:"light",className:"bg-green-100 hover:bg-green-100",children:[o?b.formatMessage(ey.installing):b.formatMessage(ey.uninstalling),(0,p.jsx)(et.Z,{})]}):(null===(n=i.user_settings)||void 0===n?void 0:n.is_installed)?(0,p.jsxs)(en.z,{color:"light",className:"hover:bg-gray-200",onClick:C,children:[(0,p.jsx)(y.Z,(0,r._)({},ey.uninstall)),(0,p.jsx)(M.$Rx,{className:"icon-sm"})]}):(0,p.jsxs)(en.z,{onClick:P,children:[(0,p.jsx)(y.Z,(0,r._)({},ey.install)),(0,p.jsx)(M.wzc,{className:"icon-sm"})]}),(0,p.jsx)(eI,{logo:(0,p.jsx)(_.Z,{url:i.manifest.logo_url,name:i.manifest.name_for_human,size:"100%",large:!0}),tag:(0,Z.cf)(i)?(0,p.jsx)(eu.Aj,{}):"approved"!==i.status?(0,p.jsx)(eu.i$,{}):void 0,title:(0,p.jsx)("div",{className:"max-w-full truncate text-lg leading-6",children:i.manifest.name_for_human}),button:t,description:i.manifest.description_for_human,developerInfo:(0,p.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,p.jsx)(y.Z,(0,r._)({},ey.developerInfo)),(0,p.jsx)("a",{href:i.manifest.legal_info_url,target:"_blank",rel:"noreferrer",children:(0,p.jsx)(M.RsK,{className:"icon-xs"})}),(0,p.jsx)("a",{href:"mailto:".concat(i.manifest.contact_email),children:(0,p.jsx)(M.Imn,{className:"icon-xs"})})]})})}function eZ(){return(0,p.jsx)(eI,{logo:(0,p.jsx)("div",{className:"h-full w-full rounded-[5px] bg-gray-300"}),title:(0,p.jsx)("div",{className:"h-[19px] w-[103px] rounded-[5px] bg-gray-100"}),button:(0,p.jsx)("div",{className:"h-[36px] w-[103px] rounded-[5px] bg-gray-200"}),description:(0,p.jsxs)("div",{className:"flex flex-col gap-1.5",children:[(0,p.jsx)("div",{className:"h-[14px] w-[209px] rounded-[5px] bg-gray-100"}),(0,p.jsx)("div",{className:"h-[14px] w-[218px] rounded-[5px] bg-gray-100"}),(0,p.jsx)("div",{className:"h-[14px] w-[184px] rounded-[5px] bg-gray-100"})]}),developerInfo:(0,p.jsx)("div",{className:"h-full w-[120px] rounded-[5px] bg-gray-50"})})}function eI(e){var n=e.logo,t=e.tag,i=e.title,l=e.button,a=e.description,s=e.developerInfo;return(0,p.jsxs)("div",{className:"flex flex-col gap-4 rounded border border-black/10 bg-white p-6 dark:border-white/20 dark:bg-gray-900",children:[(0,p.jsxs)("div",{className:"flex gap-4",children:[(0,p.jsx)("div",{className:"h-[70px] w-[70px] shrink-0",children:n}),(0,p.jsxs)("div",{className:"flex min-w-0 flex-col items-start justify-between",children:[null!=t?(0,p.jsxs)("div",{className:"flex items-center gap-1.5",children:[t,i]}):i,l]})]}),(0,p.jsx)("div",{className:"h-[60px] text-sm text-black/70 line-clamp-3 dark:text-white/70",children:a}),(0,p.jsx)("div",{className:"h-[14px] text-xs text-black/60 dark:text-white/60",children:s})]})}var eB=P.Z.button(eb(),function(e){return e.$disabled?"opacity-50 cursor-default":"hover:text-black/50 dark:hover:text-white/50"}),eS=P.Z.div(ej()),eN=(0,k.vU)({aboutPlugins:{id:"StoreDisclaimerModal.aboutPlugins",defaultMessage:"About plugins",description:"Title for the About Plugins modal"},okButton:{id:"StoreDisclaimerModal.okButton",defaultMessage:"OK",description:"OK button text"},cancelButton:{id:"StoreDisclaimerModal.cancelButton",defaultMessage:"Cancel",description:"Cancel button text"},thirdPartyWarning:{id:"StoreDisclaimerModal.thirdPartyWarning",defaultMessage:"Plugins are powered by third party applications that are not controlled by OpenAI. Be sure you trust a plugin before installation.",description:"Warning about third-party applications and trust"},externalAppsWarning:{id:"StoreDisclaimerModal.externalAppsWarning",defaultMessage:"Plugins connect ChatGPT to external apps. If you enable a plugin, ChatGPT may send your conversation, Custom Instructions, and the country or state you're in to the plugin.",description:"Warning about external apps and data sharing"},autoUseWarning:{id:"StoreDisclaimerModal.autoUseWarning",defaultMessage:"ChatGPT automatically chooses when to use plugins during a conversation, depending on the plugins you've enabled.",description:"Information about automatic plugin usage during conversations"}});function eL(e){var n=e.allowClose,t=e.onConfirm,i=e.onClose,l=(0,q.Z)();return(0,p.jsx)(A.Z,{isOpen:!0,onClose:i,type:"success",title:l.formatMessage(eN.aboutPlugins),primaryButton:(0,p.jsx)(L.ZP.Button,{title:l.formatMessage(eN.okButton),color:"primary",onClick:t}),secondaryButton:n&&(0,p.jsx)(L.ZP.Button,{title:l.formatMessage(eN.cancelButton),color:"neutral",onClick:i}),children:(0,p.jsx)(z.p,{children:(0,p.jsxs)(R.I,{children:[(0,p.jsx)(R.Z,{icon:"\uD83D\uDEA8",children:(0,p.jsx)(y.Z,(0,r._)({},eN.thirdPartyWarning))}),(0,p.jsx)(R.Z,{icon:"\uD83C\uDF10",children:(0,p.jsx)(y.Z,(0,r._)({},eN.externalAppsWarning))}),(0,p.jsx)(R.Z,{icon:"\uD83E\uDDE0",children:(0,p.jsx)(y.Z,(0,r._)({},eN.autoUseWarning))})]})})})}var eA=I.F.HasSeenPluginDisclaimer;function eD(e){var n=e.onInstall,t=e.onClose,i=(0,d._)((0,j.useState)(!!I.m.getItem(eA)),2),l=i[0],a=i[1],s=(0,d._)((0,j.useState)(!1),2),o=s[0],r=s[1],u=(0,d._)((0,j.useState)(!1),2),c=u[0],f=u[1],g=(0,d._)((0,j.useState)(),2),h=g[0],m=g[1],x=(0,d._)((0,j.useState)(!1),2),v=x[0],b=x[1],M=(0,j.useCallback)(function(){a(!0),r(!1),I.m.setItem(eA,!0)},[]),y=(0,j.useCallback)(function(e){m(e),f(!0)},[]),k=(0,j.useCallback)(function(){f(!0)},[]),P=(0,j.useCallback)(function(){b(!0)},[]),_=(0,j.useCallback)(function(){r(!0)},[]),C=(0,j.useCallback)(function(e){(0,B.wu)(e.id),t(),n(e)},[n,t]),T=(0,j.useCallback)(function(){m(void 0),f(!1),t()},[t]),w=(0,j.useCallback)(function(){b(!1),t()},[t]);return!l||o?(0,p.jsx)(eL,{allowClose:!l,onConfirm:M,onClose:t}):c?(0,p.jsx)(X.Z,{plugin:h,onInstall:C,onClose:T}):v?(0,p.jsx)(G,{onClickInstall:y,onInstallLocalhost:C,onClose:w}):(0,p.jsx)(eP,{onInstallWithAuthRequired:y,onClickInstallDeveloper:k,onClickDevelop:P,onClickAbout:_,onClose:t})}function eR(){var e=(0,f._)(["flex h-8 flex-shrink-0 items-center justify-center border-b border-black/10 bg-gray-50 text-xs text-gray-800 dark:border-white/20 dark:bg-[#272832] dark:text-white"]);return eR=function(){return e},e}function eE(e){var n,t=e.theme,i=void 0===t?"default":t,l=(0,d._)((0,j.useState)(!1),2),a=l[0],s=l[1],o=(0,d._)((0,j.useState)(!1),2),f=o[0],k=o[1],P=(0,b.useRouter)(),I=(0,ed.C)(),S=I.installedPlugins,N=I.isLoading,L=(0,B.p0)(),A=(0,j.useRef)(null);(0,j.useEffect)(function(){if(!N){var e=P.query,n=e.loginAip,t=e.loginSuccess,i=(0,c._)(e,["loginAip","loginSuccess"]);if(n){var l,a,s=S.find(function(e){return e.id===n});s&&"true"===t?((0,B.wu)(P.query.loginAip),null===(l=A.current)||void 0===l||l.open()):w.m.warning("Couldn't log in with ".concat(null!==(a=null==s?void 0:s.manifest.name_for_human)&&void 0!==a?a:"plugin",".")),P.replace({pathname:P.pathname,query:i})}}},[P,S,N]);var D=(0,j.useCallback)(function(){var e;null===(e=A.current)||void 0===e||e.open()},[]),R=(0,j.useCallback)(function(){s(!1)},[]),E=(0,d._)((0,j.useState)(L),2),W=E[0],U=E[1],q=(0,j.useCallback)(function(e){if(e.length>B.hZ)k(!0),setTimeout(function(){k(!1)},600);else{var n=e.filter(function(e){return!L.find(function(n){return n.id===e.id})}),t=!0,i=!1,l=void 0;try{for(var a,s=B.iO[Symbol.iterator]();!(t=(a=s.next()).done);t=!0){var o=function(){var e=a.value,t=L.find(function(n){return e.includes(n.domain)});if(t){var i=e.find(function(e){return e!==t.domain}),l=n.find(function(e){return e.domain===i});if(l)return w.m.warning("You can't enable ".concat(l.manifest.name_for_human," while ").concat(t.manifest.name_for_human," is enabled.")),{v:void 0}}}();if("object"===(0,g._)(o))return o.v}}catch(e){i=!0,l=e}finally{try{t||null==s.return||s.return()}finally{if(i)throw l}}(0,B.dT)(e.map(function(e){return e.id}))}},[L]),F=(0,j.useCallback)(function(e){var n;null===(n=A.current)||void 0===n||n.close(),"store"===e&&s(!0)},[]),O=(0,j.useCallback)(function(){U(L),x.m9.logEvent("chatgpt_plugin_chooser_opened",null,{num_enabled_plugins:"".concat(L.length)}),h.A.logEvent(m.M.pluginChooserOpened,{num_enabled_plugins:"".concat(L.length)})},[L]),z=(0,j.useCallback)(function(){var e=W.filter(function(e){return!L.find(function(n){return n.id===e.id})}),n=L.filter(function(e){return!W.find(function(n){return n.id===e.id})}),t=!0,i=!1,l=void 0;try{for(var a,s=n[Symbol.iterator]();!(t=(a=s.next()).done);t=!0){var o=a.value;x.m9.logEvent("chatgpt_plugin_enabled",null,{plugin_id:o.id}),h.A.logEvent(m.M.pluginEnabled,{plugin_id:o.id})}}catch(e){i=!0,l=e}finally{try{t||null==s.return||s.return()}finally{if(i)throw l}}var r=!0,u=!1,c=void 0;try{for(var d,f=e[Symbol.iterator]();!(r=(d=f.next()).done);r=!0){var g=d.value;x.m9.logEvent("chatgpt_plugin_disabled",null,{plugin_id:g.id}),h.A.logEvent(m.M.pluginDisabled,{plugin_id:g.id})}}catch(e){u=!0,c=e}finally{try{r||null==f.return||f.return()}finally{if(u)throw c}}},[L,W]),H=(0,C.Ml)(),V=S.map(function(e){return{value:e,title:e.manifest.name_for_human,description:e.manifest.description_for_human,tags:[],customTags:(0,Z.cf)(e)?(0,p.jsx)(eu.Aj,{}):"approved"!==e.status?(0,p.jsx)(eu.i$,{}):void 0,imageUrl:e.manifest.logo_url}}),G=V.filter(function(e){return L.find(function(n){return n.id===e.value.id})}),$=H?(0,p.jsx)(y.Z,(0,u._)((0,r._)({},eU.pluginsInstalled),{values:{count:L.length}})):(0,p.jsx)(y.Z,(0,u._)((0,r._)({},eU.pluginsEnabled),{values:{count:L.length}}));if(L.length>0&&L.length<6){var J=L.map(function(e,n){return(0,p.jsx)(_.Z,{url:e.manifest.logo_url,name:e.manifest.name_for_human,size:24},n)});$=(0,p.jsx)("div",{className:"flex gap-2",children:J})}var Y=[{id:"store",label:"Plugin store",icon:M.Rgz}];S.length>B.hZ&&(n=(0,p.jsx)(eW,{className:(0,v.default)("transition-colors duration-300",f&&"bg-red-200 text-red-800 dark:bg-red-200 dark:text-red-800"),children:(0,p.jsx)(y.Z,(0,u._)((0,r._)({},eU.enabledPluginsLimit),{values:{enabledPlugins:L.length,maxEnabledPlugins:B.hZ}}))}));var K=(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(eW,{children:(0,p.jsx)(y.Z,(0,r._)({},eU.loading))}),(0,p.jsx)(T.ze,{showCheckbox:!0,theme:i}),(0,p.jsx)(T.ze,{showCheckbox:!0,theme:i}),(0,p.jsx)(T.ze,{showCheckbox:!0,theme:i}),(0,p.jsx)(T.ze,{showCheckbox:!0,theme:i}),(0,p.jsx)(T.ze,{showCheckbox:!0,theme:i})]});return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(T.ZP,{name:"Plugins",selectedOptions:G,selectedLabel:$,options:V,actions:Y,onChange:q,onAction:F,onOpen:O,onClose:z,dropdownRef:A,isLoading:N,loadingState:K,header:n,theme:"mini"===i?"mini":"default"}),a&&(0,p.jsx)(eD,{onInstall:D,onClose:R})]})}var eW=P.Z.div(eR()),eU=(0,k.vU)({pluginsEnabled:{id:"PluginChooser.pluginsEnabled",description:"Text shown with the number of enabled plugins.",defaultMessage:"{count, plural, =0 {No plugins} one {# plugin} other {# plugins}} enabled"},pluginsInstalled:{id:"PluginChooser.pluginsInstalled",description:"Text shown with the number of enabled plugins.",defaultMessage:"{count, plural, =0 {No plugins} one {# plugin} other {# plugins}} installed"},loading:{id:"PluginChooser.loading",description:"Text shown when plugin information is being loaded.",defaultMessage:"Loading..."},enabledPluginsLimit:{id:"PluginChooser.enabledPluginsLimit",description:"Text shown with the number of enabled plugins and the maximum limit.",defaultMessage:"{enabledPlugins}/{maxEnabledPlugins} Enabled"}})},95999:function(e,n,t){t.d(n,{L:function(){return r},p:function(){return o}});var i=t(4337),l=t(21389);function a(){var e=(0,i._)(["mt-4 flex flex-col gap-4"]);return a=function(){return e},e}function s(){var e=(0,i._)(["text-sm text-red-500"]);return s=function(){return e},e}var o=l.Z.div(a()),r=l.Z.div(s())},17582:function(e,n,t){t.d(n,{Z:function(){return P}});var i=t(21722),l=t(39324),a=t(71209),s=t(10064),o=t(38104),r=t(35250),u=t(94705),c=t(7184),d=t(89319),f=t(86646),g=t(70079),p=t(70671),h=t(32004),m=t(94968),x=t(64898),v=t(96251),b=t(43178),j=t(95999),M=t(61276),y=(0,m.vU)({title:{id:"InstallUnverifiedDisclaimerModal.title",defaultMessage:"Unverified plugin",description:"Title for the Install Unverified Disclaimer Modal"},continue:{id:"InstallUnverifiedDisclaimerModal.continue",defaultMessage:"Continue",description:"Primary action button for proceeding with installation"},cancel:{id:"InstallUnverifiedDisclaimerModal.cancel",defaultMessage:"Cancel",description:"Secondary action button for cancelling the installation"},warning:{id:"InstallUnverifiedDisclaimerModal.warning",defaultMessage:"OpenAI hasn't vetted this plugin. This plugin may pose risks to your information. Be sure you trust this plugin before proceeding.",description:"Warning message about unverified plugins"}});function k(e){var n=e.onConfirm,t=e.onClose,i=(0,p.Z)();return(0,r.jsx)(c.Z,{isOpen:!0,onClose:t,type:"success",title:i.formatMessage(y.title),primaryButton:(0,r.jsx)(u.ZP.Button,{title:i.formatMessage(y.continue),color:"primary",onClick:n}),secondaryButton:(0,r.jsx)(u.ZP.Button,{title:i.formatMessage(y.cancel),color:"neutral",onClick:t}),children:(0,r.jsx)(j.p,{children:(0,r.jsx)(M.I,{children:(0,r.jsx)(M.Z,{icon:"\uD83D\uDEA8",children:(0,r.jsx)(h.Z,(0,l._)({},y.warning))})})})})}function P(e){var n=e.plugin,t=e.onInstall,i=e.onClose,l=(0,s._)((0,g.useState)(!1),2),a=l[0],o=l[1],u=(0,s._)((0,g.useState)(n),2),c=u[0],d=u[1],f=(0,g.useCallback)(function(){o(!0)},[]);return c?a?(0,r.jsx)(C,{plugin:c,onInstall:t,onClose:i}):(0,r.jsx)(k,{onConfirm:f,onClose:i}):(0,r.jsx)(_,{onLoad:d,onClose:i})}function _(e){var n=e.onLoad,t=e.onClose,a=(0,p.Z)(),m=(0,g.useRef)(null),x=(0,s._)((0,g.useState)(!1),2),b=x[0],M=x[1],y=(0,s._)((0,g.useState)(),2),k=y[0],P=y[1];(0,g.useEffect)(function(){setTimeout(function(){var e;null===(e=m.current)||void 0===e||e.focus()},50)},[]);var _=(0,g.useCallback)((0,i._)(function(){var e,t,i;return(0,o.Jh)(this,function(l){switch(l.label){case 0:if(!(t=null===(e=m.current)||void 0===e?void 0:e.value))return P("Please provide a URL."),[2];if((0,v.NB)(t))return P('To add a localhost plugin, please go to "Develop your own plugin."'),[2];l.label=1;case 1:return l.trys.push([1,3,4,5]),M(!0),[4,f.ZP.getPluginByDomain({domain:t})];case 2:return(i=l.sent())?n(i):P("That plugin doesn't exist."),[3,5];case 3:return l.sent(),P("Couldn't find plugin."),[3,5];case 4:return M(!1),[7];case 5:return[2]}})}),[n,M,P]);return(0,r.jsx)(c.Z,{isOpen:!0,onClose:t,type:"success",title:a.formatMessage(T.installUnverifiedPluginTitle),primaryButton:(0,r.jsx)(u.ZP.Button,{title:a.formatMessage(T.findPlugin),color:"primary",onClick:_,loading:b}),secondaryButton:(0,r.jsx)(u.ZP.Button,{title:a.formatMessage(T.cancel),color:"neutral",onClick:t}),children:(0,r.jsxs)(j.p,{children:[(0,r.jsx)("div",{children:(0,r.jsx)(h.Z,(0,l._)({},T.pleaseProvideDomain))}),(0,r.jsx)(d.Z,{ref:m,name:"url",placeholder:"openai.com",onPressEnter:_}),k&&(0,r.jsx)(j.L,{children:k})]})})}function C(e){var n=e.plugin,t=e.onInstall,f=e.onClose,m=(0,p.Z)(),v=(0,s._)((0,g.useState)(),2),M=v[0],y=v[1],k=(0,s._)((0,g.useState)(!1),2),P=k[0],_=k[1],C=(0,g.useRef)(null),w=(0,x.useInstallPlugin)({onSuccess:function(e){t(e),f()},onError:function(e){y("Couldn't install plugin.")}}),Z=n.manifest.name_for_human,I="user_http"===n.manifest.auth.type,B="oauth"===n.manifest.auth.type,S=(0,g.useCallback)((0,i._)(function(){return(0,o.Jh)(this,function(e){if(B)(0,x.doOauthRedirect)(n);else try{_(!0),w(n.id)}catch(e){y("Couldn't install plugin.")}finally{_(!1)}return[2]})}),[n,B,w]);return(0,r.jsx)(c.Z,{isOpen:!0,onClose:f,type:"success",title:m.formatMessage(T.unverifiedPluginTitle),primaryButton:(0,r.jsx)(u.ZP.Button,{title:B?m.formatMessage(T.loginWithPlugin,{pluginName:Z}):m.formatMessage(T.installPlugin),color:"primary",onClick:S,loading:P}),secondaryButton:(0,r.jsx)(u.ZP.Button,{title:m.formatMessage(T.cancel),color:"neutral",onClick:f}),children:(0,r.jsxs)(j.p,{children:[(0,r.jsx)(b.Z,{plugin:n}),I&&(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm",children:n.manifest.auth.instructions||(0,r.jsx)(h.Z,(0,l._)({},T.enterHttpAccessToken))}),(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsx)(d.Z,{ref:C,type:"password",name:"token",placeholder:"Enter your credentials",autoComplete:"off",onPressEnter:S})})]}),B&&(0,r.jsx)("div",{children:(0,r.jsx)(h.Z,(0,a._)((0,l._)({},T.youWillBeRedirected),{values:{pluginName:(0,r.jsx)("span",{className:"font-medium",children:Z})}}))}),M&&(0,r.jsx)(j.L,{children:M})]})})}var T=(0,m.vU)({installUnverifiedPluginTitle:{id:"InstallPluginModal.installUnverifiedPluginTitle",description:"Title for the Install an Unverified Plugin modal",defaultMessage:"Install an unverified plugin"},pleaseProvideDomain:{id:"InstallPluginModal.pleaseProvideDomain",description:"Text asking the user to provide the website domain of the unverified plugin",defaultMessage:"Please provide the website domain of the unverified plugin you'd like to install."},findPlugin:{id:"InstallPluginModal.findPlugin",description:"Text for the Find Plugin button",defaultMessage:"Find plugin"},cancel:{id:"InstallPluginModal.cancel",description:"Text for the Cancel button",defaultMessage:"Cancel"},unverifiedPluginTitle:{id:"InstallPluginModal.unverifiedPluginTitle",description:"Title for the Unverified Plugin modal",defaultMessage:"Unverified plugin"},loginWithPlugin:{id:"InstallPluginModal.loginWithPlugin",description:"Text for the Log in with plugin button",defaultMessage:"Log in with {pluginName}"},installPlugin:{id:"InstallPluginModal.installPlugin",description:"Text for the Install Plugin button",defaultMessage:"Install plugin"},enterHttpAccessToken:{id:"InstallPluginModal.enterHttpAccessToken",description:"Text asking user to enter their HTTP access token",defaultMessage:"Enter your HTTP access token below:"},youWillBeRedirected:{id:"InstallPluginModal.youWillBeRedirected",description:"Text informing the user they will be redirected to the plugin's login page",defaultMessage:"You will be redirected to {pluginName} to log in."}})},96096:function(e,n,t){t.d(n,{Aj:function(){return h},i$:function(){return p},nA:function(){return v},uM:function(){return x}});var i=t(39324),l=t(4337),a=t(35250),s=t(1454),o=t(94968),r=t(32004),u=t(21389);function c(){var e=(0,l._)(["flex h-[18px] w-[18px] items-center justify-center rounded-[5px] bg-red-200 text-red-800"]);return c=function(){return e},e}function d(){var e=(0,l._)(["flex items-center gap-1 rounded-[5px] bg-red-200 py-0.5 px-1.5 text-xs font-medium uppercase text-red-800"]);return d=function(){return e},e}var f=u.Z.div(c()),g=(0,o.vU)({unapprovedTag:{id:"TagComponents.unapprovedTag",defaultMessage:"Unverified",description:"Text shown inside the UnapprovedTagWithText component"},localhostTag:{id:"TagComponents.localhostTag",defaultMessage:"Localhost",description:"Text shown inside the LocalhostTagWithText component"}});function p(){return(0,a.jsx)(f,{children:(0,a.jsx)(s.OH,{className:"h-3 w-3 stroke-[2.5]"})})}function h(){return(0,a.jsx)(f,{children:(0,a.jsx)(s.V7f,{className:"icon-xs"})})}var m=u.Z.div(d());function x(){return(0,a.jsxs)(m,{children:[(0,a.jsx)(s.OH,{className:"h-3 w-3 stroke-[2.5]"}),(0,a.jsx)("div",{children:(0,a.jsx)(r.Z,(0,i._)({},g.unapprovedTag))})]})}function v(){return(0,a.jsxs)(m,{children:[(0,a.jsx)(s.V7f,{className:"icon-xs"}),(0,a.jsx)("div",{children:(0,a.jsx)(r.Z,(0,i._)({},g.localhostTag))})]})}}}]);